<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
			 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" xmlns:behaviors="http://xamarin.com/schemas/2020/toolkit"
			 x:Class="Reklamacka.MainPage"
			 NavigationPage.HasNavigationBar="False"
			 x:Name="ThisMainPage">

	<ContentPage.Resources>
		<Color x:Key="BcgTop1Color">#5b62db</Color>
		<Color x:Key="BcgTop2Color">#1b128b</Color>
		<Color x:Key="BcgBottomColor">#dddddd</Color> 
		<Color x:Key="ItemsColor">#9539c9</Color>
		<Color x:Key="ItemButtonsColor">#d18b3c</Color>
		<Color x:Key="BottomButtonsColor">#e1064c</Color>
	</ContentPage.Resources>

	<StackLayout Padding="0,80,0,0">
		<StackLayout.Background>
			<LinearGradientBrush StartPoint="0,0"
                     EndPoint="1,1">
				<GradientStop Color="{StaticResource BcgTop1Color}"
                  Offset="0.0" />
				<GradientStop Color="{StaticResource BcgTop2Color}"
                  Offset="1.0" />
			</LinearGradientBrush>
		</StackLayout.Background>

		<Label Text="Reklamacka" FontSize="30" FontAttributes="Bold" HorizontalOptions="Center" TextColor="white" VerticalOptions="Start"/>

		<Grid Margin="0,40,0,0" VerticalOptions="StartAndExpand" HeightRequest="2000"
			  RowDefinitions="10, 30, *">
			<Frame BackgroundColor="{StaticResource BcgBottomColor}" Grid.Row="0" Grid.RowSpan="3" CornerRadius="30"/>
			<Frame Grid.Row="2" BackgroundColor="{StaticResource BcgBottomColor}"/>

			<ListView Grid.Row="2" x:Name="ListBills" ItemsSource="{Binding Bills}" Margin="10" RowHeight="60"
					  SelectedItem="{Binding SelectedBill}">
				<ListView.ItemTemplate>
					<DataTemplate>
						<ViewCell>
							<ViewCell.View>
								<StackLayout Padding="0,0,0,5">
									<Grid VerticalOptions="FillAndExpand">
										<Frame Padding="10" BackgroundColor="{StaticResource ItemsColor}" VerticalOptions="FillAndExpand" CornerRadius="30">
											<StackLayout>
												<Label Text="{Binding ProductName}" TextColor="White"/>
											</StackLayout>
										</Frame>
										
										<Frame Padding="5" BackgroundColor="#77000000" VerticalOptions="FillAndExpand" CornerRadius="30" IsVisible="{Binding IsSelected}">
											<Button Text="Edit" FontSize="Default" FontAttributes="Bold" HorizontalOptions="Center"
													Command="{Binding BindingContext.EditBill}" BindingContext="{x:Reference ThisMainPage}"
													BackgroundColor="{StaticResource ItemButtonsColor}" CornerRadius="30" WidthRequest="70" TextColor="White"/>
										</Frame>
									</Grid>
								</StackLayout>
							</ViewCell.View>
						</ViewCell>
					</DataTemplate>
				</ListView.ItemTemplate>
				<ListView.Behaviors>
					<behaviors:EventToCommandBehavior
						EventName="ItemTapped" 
                        Command="{Binding ItemTapped}"
						CommandParameter="{Binding .}"/>
				</ListView.Behaviors>
			</ListView>

			<StackLayout Grid.Row="2" Orientation="Horizontal" VerticalOptions="End" HorizontalOptions="EndAndExpand">
				<Button Text="+" FontSize="30" FontAttributes="Bold" Command="{Binding AddNewBill}" 
				Margin="0,20,20,20" BackgroundColor="{StaticResource BottomButtonsColor}" CornerRadius="35" 
				HorizontalOptions="End" WidthRequest="70" HeightRequest="70" TextColor="White"/>
			</StackLayout>
		</Grid>

	</StackLayout>

</ContentPage>
