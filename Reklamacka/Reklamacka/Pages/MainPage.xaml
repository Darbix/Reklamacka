<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
			 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
			 xmlns:behaviors="http://xamarin.com/schemas/2020/toolkit"
			 x:Class="Reklamacka.MainPage"
			 NavigationPage.HasNavigationBar="False"
			 x:Name="ThisMainPage">

	<!-- Hodnoty nekterych barev -->
	<ContentPage.Resources>
		<Color x:Key="BcgTop1Color">#5b62fb</Color>
		<Color x:Key="BcgTop2Color">#000878</Color>
		<Color x:Key="BcgBottomColor">#dddddd</Color>
		<Color x:Key="ItemsRightColor">#5050cb</Color>
		<Color x:Key="ItemsLeftColor">#2b32ab</Color>
		<Color x:Key="ItemButtonsColor">#ff0640</Color>
		<Color x:Key="BottomButtonsColor">#ff0640</Color>
	</ContentPage.Resources>


	<behaviors:SideMenuView>
		<!-- Hlavni cast okna -->
		<ContentView BackgroundColor="White">

			<StackLayout Padding="5,5,5,0">
				<!-- Uplne pozadi -->
				<StackLayout.Background>
					<LinearGradientBrush StartPoint="0,0"
							 EndPoint="1,1">
						<GradientStop Color="{StaticResource BcgTop1Color}"
						  Offset="0.0" />
						<GradientStop Color="{StaticResource BcgTop2Color}"
						  Offset="1.0" />
					</LinearGradientBrush>
				</StackLayout.Background>

				<!-- Hlavicka -->
				<Label Text="•••" Margin="5" FontSize="Title" TextColor="White" HeightRequest="50" VerticalOptions="StartAndExpand" HorizontalOptions="StartAndExpand"/>
				<Label Text="Reklamacka" FontSize="30" FontAttributes="Bold" HorizontalOptions="Center" TextColor="white" VerticalOptions="StartAndExpand"/>


				<!-- Mrizka pro kulate rohy, bar s tlacitky a list -->
				<Grid Margin="0,40,0,0" VerticalOptions="StartAndExpand" HeightRequest="2000"
					RowDefinitions="10, 50, *">
					<Frame BackgroundColor="{StaticResource BcgBottomColor}" Padding="0" Grid.Row="0" Grid.RowSpan="3" CornerRadius="30">
						<Grid>
							<Button Margin="10" Text="todo" Padding="0" HorizontalOptions="StartAndExpand" VerticalOptions="Start" TextColor="Black" HeightRequest="50" 
						CornerRadius="25" WidthRequest="50" BackgroundColor="#bbbbbb"/>

						</Grid>
					</Frame>
					<Frame Grid.Row="2" BackgroundColor="{StaticResource BcgBottomColor}"/>

					<ListView Grid.Row="2" x:Name="ListBills" ItemsSource="{Binding Bills}" Margin="10,10,10,0" RowHeight="60"
						SelectedItem="{Binding SelectedBill}">
						<ListView.ItemTemplate>
							<DataTemplate>
								<ViewCell>
									<StackLayout Padding="0,0,0,5">
										<Grid VerticalOptions="FillAndExpand">
											<Frame Padding="10" VerticalOptions="FillAndExpand" CornerRadius="30">
												<Frame.Background>
													<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
														<GradientStop Color="{StaticResource ItemsLeftColor}" Offset="0.0" />
														<GradientStop Color="{StaticResource ItemsRightColor}" Offset="1.0" />
													</LinearGradientBrush>
												</Frame.Background>

												<StackLayout>
													<Label Text="{Binding ProductName}" TextColor="White"/>
												</StackLayout>
											</Frame>

											<Frame Padding="5" BackgroundColor="#77000000" VerticalOptions="FillAndExpand" CornerRadius="30" IsVisible="{Binding IsSelected}">
												<StackLayout Orientation="Horizontal">
													<Button Text="Edit" FontSize="Default" FontAttributes="Bold" HorizontalOptions="EndAndExpand"
														Command="{Binding BindingContext.EditBill}" BindingContext="{x:Reference ThisMainPage}"
														BackgroundColor="{StaticResource ItemButtonsColor}" CornerRadius="30" WidthRequest="80" TextColor="White"/>
													<Button Text="Delete" FontSize="Default" FontAttributes="Bold" HorizontalOptions="StartAndExpand"
														Command="{Binding BindingContext.DeleteBill}" BindingContext="{x:Reference ThisMainPage}"
														BackgroundColor="{StaticResource ItemButtonsColor}" CornerRadius="30" WidthRequest="80" TextColor="White"/>
												</StackLayout>
											</Frame>
										</Grid>
									</StackLayout>
								</ViewCell>
							</DataTemplate>
						</ListView.ItemTemplate>
						<ListView.Behaviors>
							<behaviors:EventToCommandBehavior
						EventName="ItemTapped" 
						Command="{Binding ItemTapped}"
						CommandParameter="{Binding .}"/>
						</ListView.Behaviors>
					</ListView>

					<StackLayout Grid.Row="2" Orientation="Horizontal" VerticalOptions="End" HorizontalOptions="EndAndExpand">
						<Button Text="+" FontSize="30" FontAttributes="Bold" Command="{Binding AddNewBill}" 
							Margin="0,20,20,20" BackgroundColor="{StaticResource BottomButtonsColor}" CornerRadius="35" 
							HorizontalOptions="End" WidthRequest="70" HeightRequest="70" TextColor="White"/>
					</StackLayout>
				</Grid>

			</StackLayout>

		</ContentView>

		<!-- Left menu bar-->
		<ScrollView x:Name="LeftBar" Padding="10,20,10,20" BackgroundColor="#444444"
					behaviors:SideMenuView.Position="LeftMenu" behaviors:SideMenuView.MainViewOpacityFactor="0.7" behaviors:SideMenuView.MenuWidthPercentage="0.5">
			<StackLayout>
				<Label Text="Menu" TextColor="White" HorizontalOptions="Center" VerticalOptions="Start" FontSize="Title"/>
				<Button Text="Sorting" Command="{Binding SortingPagePush}" FontSize="Default" FontAttributes="Bold" HorizontalOptions="Fill" VerticalOptions="StartAndExpand"
					BackgroundColor="{StaticResource BottomButtonsColor}" CornerRadius="5" TextColor="White"/>
			</StackLayout>
		</ScrollView>

	</behaviors:SideMenuView>

</ContentPage>
